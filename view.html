<script>

/* ===== WALLPAPER DATABASE ===== */
const ITEMS = {
  "tree.jpg":{
    title:"Lonely Tree",
    preview:"wallpapers/tree.jpg",
    hd:"wallpapers/hd/tree.jpg",
    type:"free",
    price:0
  },

  "beige.jpg":{
    title:"Smooth Beige",
    preview:"wallpapers/beige.jpg",
    hd:"wallpapers/hd/beige.jpg",
    type:"free",
    price:0
  },

  "room.jpg":{
    title:"Empty Room Sunlight",
    preview:"wallpapers/room.jpg",
    hd:"wallpapers/hd/room.jpg",
    type:"free",
    price:0
  },

  "moon.jpg":{
    title:"Moon Night",
    preview:"wallpapers/moon.jpg",
    type:"paid",
    price:29,
    payLink:"https://gumroad.com"
  },

  "milkyway.jpg":{
    title:"Milky Way",
    preview:"wallpapers/milkyway.jpg",
    type:"paid",
    price:15,
    payLink:"https://gumroad.com"
  },

  "street.jpg":{
    title:"Night Street Lamp",
    preview:"wallpapers/street.jpg",
    type:"paid",
    price:99,
    payLink:"https://gumroad.com"
  }
};

/* ===== GET IMAGE FROM URL ===== */
const params = new URLSearchParams(window.location.search);
const img = params.get('img') || 'tree.jpg';
const item = ITEMS[img];

/* ===== UI ELEMENTS ===== */
const wallImg = document.getElementById('wallImg');
const wallTitle = document.getElementById('wallTitle');
const meta = document.getElementById('meta');
const desc = document.getElementById('desc');
const priceBadge = document.getElementById('priceBadge');
const primaryBtn = document.getElementById('primaryBtn');
const secondaryBtn = document.getElementById('secondaryBtn');
const buyNote = document.getElementById('buyNote');

/* ===== SET WALLPAPER ===== */
wallImg.src = item.preview;
wallTitle.innerText = item.title;

if(item.type==="free"){
  meta.innerText="Free wallpaper • HD download";
  desc.innerText="You can download this wallpaper in full resolution.";
  priceBadge.style.display="inline-block";
  priceBadge.innerText="FREE";

  primaryBtn.href=item.hd;
  primaryBtn.innerText="Download HD";
  primaryBtn.setAttribute("download","");

}else{

  meta.innerText="Premium wallpaper";
  desc.innerText="Preview available. Buy to unlock full resolution.";
  priceBadge.style.display="inline-block";
  priceBadge.innerText="₹"+item.price;

  primaryBtn.href=item.payLink;
  primaryBtn.innerText="Buy Now";
  primaryBtn.removeAttribute("download");
  primaryBtn.target="_blank";

  secondaryBtn.style.display="inline-block";
}

/* ===== SUGGESTIONS ===== */
const suggestGrid=document.getElementById("suggestGrid");

Object.keys(ITEMS).forEach(key=>{
  if(key===img) return;
  const a=document.createElement("a");
  a.href="view.html?img="+key;
  a.innerHTML=`<img src="${ITEMS[key].preview}">`;
  suggestGrid.appendChild(a);
});

</script>
